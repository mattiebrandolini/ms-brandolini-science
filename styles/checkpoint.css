/* ============================================
   Checkpoint Pages â€” Component Class System
   
   Prefix: ck-
   
   Designed around the Cell Structure checkpoint
   as reference implementation. Every inline style
   from the original HTML maps to a class here.
   
   All colors use site CSS variables for dark/light
   mode support. All text respects dyslexia font,
   spacing, and text size toggles from toolbar.js.
   ============================================ */

/* ---- Page wrapper ---- */
.ck-page {
    max-width: 800px;
    margin: 0 auto;
    padding: 1.5rem 1.25rem 3rem;
    line-height: 1.75;
    font-size: 1.02em;
}
.ck-page p { margin: 0 0 0.75rem 0; }
.ck-page img { max-width: 100%; height: auto; border-radius: 8px; }

/* ---- Banners (gradient headers) ---- */
.ck-banner {
    padding: 1.25rem 1.5rem;
    border-radius: 12px;
    margin: 0 0 1.25rem 0;
    text-align: center;
}
.ck-banner h1, .ck-banner h2 {
    margin: 0;
    color: white;
    font-family: 'Source Serif 4', serif;
    text-shadow: 0 1px 3px rgba(0,0,0,0.15);
}
.ck-banner h1 { font-size: 1.5em; }
.ck-banner h2 { font-size: 1.3em; }
.ck-banner p {
    margin: 0.35rem 0 0 0;
    color: rgba(255,255,255,0.9);
    font-size: 0.95em;
}
.ck-banner .ck-banner-sub {
    color: rgba(255,255,255,0.75);
    font-size: 0.88em;
}

/* Banner color schemes */
.ck-banner--blue     { background: linear-gradient(135deg, #1565c0 0%, #7b1fa2 100%); }
.ck-banner--water    { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
.ck-banner--green    { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
.ck-banner--teal     { background: linear-gradient(135deg, #00897b 0%, #4db6ac 100%); }
.ck-banner--purple   { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
.ck-banner--red      { background: linear-gradient(135deg, #c62828 0%, #e53935 100%); }
.ck-banner--orange   { background: linear-gradient(135deg, #e65100 0%, #ff9800 100%); }
.ck-banner--warm     { background: linear-gradient(135deg, #c62828 0%, #ef5350 100%); }

/* ---- Part Headers (section dividers) ---- */
.ck-part {
    padding: 0.85rem 1.25rem;
    border-radius: 8px;
    margin: 2rem 0 0.75rem 0;
    color: white;
}
.ck-part h3 {
    margin: 0;
    font-size: 1.1em;
    font-family: 'Source Serif 4', serif;
}
.ck-part p {
    margin: 0.2rem 0 0 0;
    color: rgba(255,255,255,0.85);
    font-size: 0.88em;
}
/* Reuse banner colors: .ck-banner--blue etc work on .ck-part too */
.ck-part--blue    { background: linear-gradient(135deg, #1976d2 0%, #42a5f5 100%); }
.ck-part--purple  { background: linear-gradient(135deg, #6a1b9a 0%, #ab47bc 100%); }
.ck-part--teal    { background: linear-gradient(135deg, #00897b 0%, #4db6ac 100%); }
.ck-part--orange  { background: linear-gradient(135deg, #e65100 0%, #ff9800 100%); }
.ck-part--red     { background: linear-gradient(135deg, #c62828 0%, #ef5350 100%); }
.ck-part--green   { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
.ck-part--final   { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }

/* ---- Callout Boxes ---- */
.ck-callout {
    padding: 1rem 1.25rem;
    margin: 0 0 1rem 0;
    border-left: 5px solid;
    border-radius: 0 8px 8px 0;
}
.ck-callout strong:first-child {
    display: block;
    font-size: 1.05em;
    margin-bottom: 0.35rem;
}
.ck-callout p { margin: 0.4rem 0 0 0; }

.ck-callout--error   { background: #ffebee; border-color: #c62828; color: #b71c1c; }
.ck-callout--warning { background: #fff8e1; border-color: #ff8f00; color: #e65100; }
.ck-callout--success { background: #e8f5e9; border-color: #43a047; color: #2e7d32; }
.ck-callout--info    { background: #e3f2fd; border-color: #1976d2; color: #1565c0; }
.ck-callout--def     { background: #e0f2f1; border-color: #00897b; color: #00695c; }
.ck-callout--skip    { background: #f3e5f5; border-color: #8e24aa; color: #6a1b9a; }
.ck-callout--quiz    { background: #ffebee; border-color: #c62828; }
.ck-callout--key     { background: #e3f2fd; border-color: #1976d2; }

/* Dark mode overrides for callouts */
[data-theme="dark"] .ck-callout--error   { background: rgba(198,40,40,0.12); color: #fca5a5; border-color: #ef5350; }
[data-theme="dark"] .ck-callout--warning { background: rgba(255,143,0,0.1); color: #fcd34d; border-color: #f59e0b; }
[data-theme="dark"] .ck-callout--success { background: rgba(67,160,71,0.1); color: #86efac; border-color: #4ade80; }
[data-theme="dark"] .ck-callout--info    { background: rgba(25,118,210,0.1); color: #93c5fd; border-color: #60a5fa; }
[data-theme="dark"] .ck-callout--def     { background: rgba(0,137,123,0.1); color: #5eead4; border-color: #2dd4bf; }
[data-theme="dark"] .ck-callout--skip    { background: rgba(142,36,170,0.1); color: #d8b4fe; border-color: #a78bfa; }
[data-theme="dark"] .ck-callout--quiz    { background: rgba(198,40,40,0.12); color: #fca5a5; border-color: #ef5350; }
[data-theme="dark"] .ck-callout--key     { background: rgba(25,118,210,0.1); color: #93c5fd; border-color: #60a5fa; }

/* Body text within callouts in dark mode */
[data-theme="dark"] .ck-callout p { color: var(--text-primary); }
[data-theme="dark"] .ck-callout strong:first-child { color: inherit; }

/* ---- Content Blocks (reading passages) ---- */
.ck-content {
    background: var(--bg-card);
    padding: 1.25rem;
    border-radius: 12px;
    margin: 0 0 1rem 0;
    border: 1px solid var(--border-subtle);
}
.ck-content p { margin: 0 0 0.75rem 0; }
.ck-content p:last-child { margin-bottom: 0; }

/* ---- Highlight Box (centered key point) ---- */
.ck-highlight {
    background: var(--bg-card);
    border: 2px solid var(--border-subtle);
    border-radius: 12px;
    padding: 1.25rem;
    margin: 1rem 0;
    text-align: center;
}
.ck-highlight strong:first-child {
    display: block;
    font-size: 1.05em;
    margin-bottom: 0.5rem;
}
.ck-highlight--green  { background: #e8f5e9; border-color: #43a047; }
.ck-highlight--blue   { background: #e3f2fd; border-color: #1976d2; }
[data-theme="dark"] .ck-highlight--green { background: rgba(67,160,71,0.08); border-color: rgba(74,222,128,0.3); }
[data-theme="dark"] .ck-highlight--blue  { background: rgba(25,118,210,0.08); border-color: rgba(96,165,250,0.3); }

/* ---- Numbered Steps ---- */
.ck-steps {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 0.6rem;
}
.ck-steps td { vertical-align: top; }
.ck-step-num {
    width: 44px; text-align: center;
}
.ck-step-dot {
    display: inline-block;
    width: 34px; height: 34px; line-height: 34px;
    border-radius: 50%; text-align: center;
    color: white; font-weight: 700; font-size: 1em;
}
.ck-step-body {
    padding: 0.85rem 1rem;
    border-radius: 12px;
}

/* Step color variants */
.ck-step-dot--1 { background: #00897b; }
.ck-step-dot--2 { background: #1976d2; }
.ck-step-dot--3 { background: #7b1fa2; }
.ck-step-dot--4 { background: #e65100; }
.ck-step-dot--5 { background: #c62828; }

.ck-step-body--teal   { background: #e0f2f1; }
.ck-step-body--blue   { background: #e3f2fd; }
.ck-step-body--purple { background: #f3e5f5; }
.ck-step-body--orange { background: #fff3e0; }
.ck-step-body--red    { background: #ffebee; }

[data-theme="dark"] .ck-step-body--teal   { background: rgba(0,137,123,0.1); }
[data-theme="dark"] .ck-step-body--blue   { background: rgba(25,118,210,0.1); }
[data-theme="dark"] .ck-step-body--purple { background: rgba(123,31,162,0.1); }
[data-theme="dark"] .ck-step-body--orange { background: rgba(230,81,0,0.1); }
[data-theme="dark"] .ck-step-body--red    { background: rgba(198,40,40,0.1); }

/* ---- Video / Resource Lists ---- */
.ck-video-list {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 0.6rem;
}
.ck-video-list td { vertical-align: top; }
.ck-video-card {
    padding: 0.85rem 1rem;
    border-radius: 12px;
}
.ck-video-card a { color: #1976d2; }
[data-theme="dark"] .ck-video-card a { color: #60a5fa; }
.ck-video-card .ck-video-note {
    font-size: 0.88em; color: var(--text-secondary);
}
.ck-video-card .ck-video-match {
    font-size: 0.82em; color: var(--text-dim);
}

/* ---- Figures (images with captions) ---- */
.ck-figure {
    border: 2px solid var(--border-subtle);
    border-radius: 12px;
    padding: 1.25rem;
    margin: 1rem 0;
    text-align: center;
}
.ck-figure img {
    width: 100%; height: auto;
    border-radius: 8px;
}
.ck-figure-label {
    margin: 0 0 0.75rem 0;
    font-weight: 600; font-size: 0.95em;
}
.ck-figure-caption {
    margin: 0.6rem 0 0 0;
    font-size: 0.82em;
    color: var(--text-secondary);
}

/* Figure color variants */
.ck-figure--blue   { border-color: #1976d2; }
.ck-figure--purple { border-color: #8e24aa; }
.ck-figure--green  { border-color: #43a047; }
.ck-figure--teal   { border-color: #00897b; }
.ck-figure--orange { border-color: #e65100; }
[data-theme="dark"] .ck-figure--blue   { border-color: rgba(96,165,250,0.4); }
[data-theme="dark"] .ck-figure--purple { border-color: rgba(167,139,250,0.4); }
[data-theme="dark"] .ck-figure--green  { border-color: rgba(74,222,128,0.4); }
[data-theme="dark"] .ck-figure--teal   { border-color: rgba(45,212,191,0.4); }
[data-theme="dark"] .ck-figure--orange { border-color: rgba(251,146,60,0.4); }

/* ---- Expandable Sections (details/summary) ---- */
.ck-details {
    margin: 0.75rem 0;
    border: 2px solid var(--border-subtle);
    border-radius: 12px;
    overflow: hidden;
}
.ck-details summary {
    padding: 0.85rem 1rem;
    cursor: pointer;
    font-size: 1em;
    font-weight: 500;
    background: var(--bg-card);
}
.ck-details summary:hover { background: var(--bg-card-hover); }
.ck-details > div,
.ck-details > .ck-details-body {
    padding: 1rem;
    background: var(--bg-card);
    border-top: 1px solid var(--border-subtle);
}

/* Colored details */
.ck-details--blue   { border-color: #1976d2; }
.ck-details--purple { border-color: #8e24aa; }
.ck-details--green  { border-color: #43a047; }
.ck-details--teal   { border-color: #00897b; }
.ck-details--orange { border-color: #e65100; }
.ck-details--red    { border-color: #c62828; }
.ck-details--muted  { border-color: #9e9e9e; }
[data-theme="dark"] .ck-details--blue   { border-color: rgba(96,165,250,0.4); }
[data-theme="dark"] .ck-details--purple { border-color: rgba(167,139,250,0.4); }
[data-theme="dark"] .ck-details--green  { border-color: rgba(74,222,128,0.4); }
[data-theme="dark"] .ck-details--teal   { border-color: rgba(45,212,191,0.4); }
[data-theme="dark"] .ck-details--orange { border-color: rgba(251,146,60,0.4); }
[data-theme="dark"] .ck-details--red    { border-color: rgba(248,113,113,0.4); }
[data-theme="dark"] .ck-details--muted  { border-color: rgba(255,255,255,0.15); }

/* Tinted summaries */
.ck-details--blue   summary { background: #e3f2fd; color: #1565c0; }
.ck-details--purple summary { background: #f3e5f5; color: #6a1b9a; }
.ck-details--green  summary { background: #e8f5e9; color: #2e7d32; }
.ck-details--teal   summary { background: #e0f2f1; color: #00695c; }
.ck-details--orange summary { background: #fff3e0; color: #e65100; }
.ck-details--red    summary { background: #ffebee; color: #c62828; }
.ck-details--muted  summary { background: #f5f5f5; }

[data-theme="dark"] .ck-details summary {
    background: var(--bg-card);
    color: var(--text-primary);
}

/* ---- Vocab Tables ---- */
.ck-vocab {
    width: 100%;
    border-collapse: collapse;
    margin: 0 0 1.25rem 0;
    font-size: 0.88em;
}
.ck-vocab thead tr {
    background: linear-gradient(135deg, #00695c, #00897b);
}
.ck-vocab th {
    padding: 0.6rem 0.65rem;
    color: white;
    text-align: left;
    font-weight: 600;
    font-size: 0.92em;
}
.ck-vocab th:first-child { border-radius: 8px 0 0 0; }
.ck-vocab th:last-child { border-radius: 0 8px 0 0; }
.ck-vocab td {
    padding: 0.5rem 0.65rem;
    border-bottom: 1px solid var(--border-subtle);
}
.ck-vocab tr:nth-child(odd) td { background: rgba(0,0,0,0.02); }
.ck-vocab tr:nth-child(even) td { background: transparent; }
[data-theme="dark"] .ck-vocab tr:nth-child(odd) td { background: rgba(255,255,255,0.02); }

/* ---- Comparison Tables ---- */
.ck-compare {
    width: 100%;
    border-collapse: collapse;
    margin: 0 0 1rem 0;
}
.ck-compare thead tr {
    background: linear-gradient(135deg, #1565c0, #1976d2);
}
.ck-compare th {
    padding: 0.7rem;
    color: white;
    text-align: center;
    font-weight: 600;
}
.ck-compare th:first-child { text-align: left; border-radius: 8px 0 0 0; }
.ck-compare th:last-child { border-radius: 0 8px 0 0; }
.ck-compare td {
    padding: 0.6rem 0.7rem;
    border-bottom: 1px solid var(--border-subtle);
    text-align: center;
}
.ck-compare td:first-child { text-align: left; }
.ck-compare tr:nth-child(odd) td { background: rgba(0,0,0,0.02); }
[data-theme="dark"] .ck-compare tr:nth-child(odd) td { background: rgba(255,255,255,0.02); }

.ck-yes { color: #2e7d32; }
.ck-no  { color: #c62828; }
[data-theme="dark"] .ck-yes { color: #86efac; }
[data-theme="dark"] .ck-no  { color: #fca5a5; }

/* ---- Practice Resource Cards (3-column) ---- */
.ck-resources {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0.75rem 0;
    margin: 0 0 1rem 0;
}
.ck-resource-card {
    width: 33%;
    padding: 1rem;
    border-radius: 12px;
    vertical-align: top;
    text-align: center;
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
}
.ck-resource-card a { color: #1976d2; font-size: 0.88em; }
[data-theme="dark"] .ck-resource-card a { color: #60a5fa; }
.ck-resource-icon { font-size: 1.6em; margin-bottom: 0.4rem; }
.ck-resource-note { font-size: 0.78em; color: var(--text-dim); margin-top: 0.2rem; }

/* ---- Check Yourself (practice questions) ---- */
.ck-check {
    background: var(--bg-card);
    padding: 1.25rem;
    border-radius: 12px;
    margin: 0 0 1rem 0;
    border: 1px solid var(--border-subtle);
}
.ck-check p {
    margin: 0 0 1rem 0;
}
.ck-check p:last-child { margin-bottom: 0; }

/* ---- Footer Sign-off ---- */
.ck-signoff {
    text-align: center;
    color: var(--text-secondary);
    font-size: 1.05em;
    margin-top: 2.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border-subtle);
}

/* ---- Readiness Checklist ---- */
.ck-checklist p {
    margin: 0.4rem 0;
    padding-left: 0.25rem;
}

/* ---- Language sections inside details ---- */
.ck-lang-note {
    font-style: italic;
    margin-bottom: 0.75rem;
}

/* ---- Inline links ---- */
.ck-page a {
    color: #1976d2;
    text-decoration: none;
}
.ck-page a:hover { text-decoration: underline; }
[data-theme="dark"] .ck-page a { color: #60a5fa; }

/* ---- Checklist bullets ---- */
.ck-page .ck-bullets {
    margin: 0.5rem 0;
    padding-left: 0.25rem;
}
.ck-page .ck-bullets p { margin: 0.35rem 0; }

/* ---- Accessibility ---- */
[data-dyslexic="true"] .ck-page { font-family: "OpenDyslexic", "DM Sans", sans-serif !important; }
[data-dyslexic="true"] .ck-banner h1,
[data-dyslexic="true"] .ck-banner h2,
[data-dyslexic="true"] .ck-part h3 { font-family: "OpenDyslexic", "Source Serif 4", serif !important; }

[data-spacing="true"] .ck-page { line-height: 2.1; letter-spacing: 0.03em; word-spacing: 0.12em; }
[data-spacing="true"] .ck-callout p { line-height: 2; }

/* ---- Mobile ---- */
@media (max-width: 768px) {
    .ck-page { padding: 1rem 0.75rem 2rem; }
    .ck-banner { padding: 1rem; }
    .ck-banner h1 { font-size: 1.25em; }
    .ck-resources { border-spacing: 0; }
    .ck-resources tr { display: flex; flex-direction: column; gap: 0.75rem; }
    .ck-resource-card { width: 100%; }
    .ck-vocab { font-size: 0.78em; }
    .ck-vocab th, .ck-vocab td { padding: 0.35rem; }
}
@media (max-width: 480px) {
    .ck-vocab { display: block; overflow-x: auto; }
}

/* ---- Print ---- */
@media print {
    .ck-page { max-width: none; padding: 0; }
    .ck-banner, .ck-part { color: black !important; background: #eee !important; }
    .ck-banner h1, .ck-banner h2, .ck-part h3 { color: black !important; text-shadow: none; }
    .ck-details > div { display: block !important; }
    .ck-callout { border-left-width: 3px; }
}
